<!DOCTYPE html>
<html>
<head>
  <title>バーチャルろくろ ARお持ち帰り</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@0.7.4/dist/tailwind.min.css" />
  <style type="text/css">

  </style>
</head>
<body>
  <div class="py-24" style="background: rgb(12, 52, 75)">
    <div class="container mx-auto px-6">
      <h2 class="text-4xl font-bold mb-8 text-white">
        バーチャルろくろ ARお持ち帰り
      </h2>
      <div class="viewer">
        <model-viewer
          id="viewer"
          ar 
          camera-controls touch-action="pan-y"
          shadow-intensity="1"
        ></model-viewer>
      </div>
    </div>
  </div>

  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <script>
    const url = new URL(window.location.href)
    const params = url.searchParams;
    const id = params.get('id')
    if (id !== null) {
      const url = `/.netlify/functions/getModel?id=${id}`
      fetch(url)
        .then((response) => {
          return response.json()
        })
        .then(response => {
          console.log(response)
          const viewer = document.getElementById('viewer')
          viewer.setAttribute('src', response.publicUrl)
        })
    }

  </script>
</body>

</html>